{"version":3,"sources":["components/MovieItem.jsx","components/MovieTabs.jsx","components/Pagination.jsx","components/App.jsx","utils/api.js","index.js"],"names":["MovieItem","state","willWatch","toggleWillWatch","setState","console","log","this","props","movie","title","removeMovie","addMovieToWillWatch","removeMovieFromWillWatch","className","src","backdrop_path","poster_path","alt","vote_average","type","onClick","bind","React","Component","MovieTabs","nextProps","textState","nextState","sort_by","updateSortBy","handleClick","value","getClassLink","Pagination","page","updatePageNum","total_pages","newPage","disabled","App","getMovies","fetch","then","response","json","data","movies","results","updateMovies","filter","item","id","updateMoviesWillWatch","moviesWillWatch","prevProps","prevState","map","key","length","ReactDOM","render","document","getElementById"],"mappings":"8NAoDeA,E,4MAjDXC,MAAQ,CACJC,WAAW,G,EAQfC,gBAAkB,WACd,EAAKC,SAAS,CAACF,WAAY,EAAKD,MAAMC,a,qEALtCG,QAAQC,IAAI,UAAWC,KAAKC,MAAMC,MAAMC,S,+BAQlC,IAAD,SACyEH,KAAKC,MAA3EC,EADH,EACGA,MAAOE,EADV,EACUA,YAAaC,EADvB,EACuBA,oBAAqBC,EAD5C,EAC4CA,yBAEjD,OAOI,yBAAKC,UAAU,QACX,yBACIA,UAAU,eACVC,IAAG,yCAAoCN,EAAMO,eAC7CP,EAAMQ,aACNC,IAAKT,EAAMC,QAEf,yBAAKI,UAAU,aACX,wBAAIA,UAAU,cAAcL,EAAMC,OAClC,yBAAKI,UAAU,qDACf,uBAAGA,UAAU,QAAb,WAA6BL,EAAMU,cACnC,4BAAQC,KAAK,SAASN,UAAWP,KAAKN,MAAMC,UAAY,kBAAoB,oBAAqBmB,QAAS,WAClG,EAAKlB,kBACL,EAAKF,MAAMC,UAAYW,EAAyBJ,GAASG,EAAoBH,KAEhFF,KAAKN,MAAMC,UAAY,eAAiB,eAG7C,4BAAQmB,QAASV,EAAYW,KAAKf,KAAME,IAAxC,sB,GA1CIc,IAAMC,WCmDfC,E,wLAlDeC,EAAWC,GACjCtB,QAAQC,IAAI,6BACZD,QAAQC,IAAI,YAAaC,KAAKC,OAC9BH,QAAQC,IAAI,YAAaoB,K,4CAGPA,EAAWE,GAC7B,OAAGF,EAAUG,UAAYtB,KAAKC,MAAMqB,U,+BAK9B,IAAD,EAC6BtB,KAAKC,MAA/BqB,EADH,EACGA,QAASC,EADZ,EACYA,aACXC,EAAc,SAAAC,GAAK,OAAI,WACzBF,EAAaE,KASXC,EAAe,SAAAD,GACjB,MAAM,YAAN,OAAmBH,IAAYG,EAAQ,SAAW,KAGtD,OACI,wBAAIlB,UAAU,sBACV,wBAAIA,UAAU,YACV,yBAAKA,UAAWmB,EAAa,mBAAoBZ,QAASU,EAAY,oBAAtE,oBAIJ,wBAAIjB,UAAU,YACV,yBAAKA,UAAWmB,EAAa,gBAAiBZ,QAASU,EAAY,iBAAnE,iBAIJ,wBAAIjB,UAAU,YACV,yBAAKA,UAAWmB,EAAa,qBAAsBZ,QAASU,EAAY,sBAAxE,2B,GA1CIR,IAAMC,WCcfU,E,uKAbF,IAAD,EACyC3B,KAAKC,MAA1C2B,EADJ,EACIA,KAAMC,EADV,EACUA,cAAeC,EADzB,EACyBA,YACzBC,EAAUH,EACd,OACI,yBAAKrB,UAAU,cACX,4BAAQyB,SAAmB,IAATJ,EAA2Bd,QAASe,EAAcd,KAAKf,KAAM+B,EAAQ,IAAvF,YACA,6CAAmBH,EAAnB,SAA+BE,GAC/B,4BAAQE,SAAmB,MAATJ,EAA6Bd,QAASe,EAAcd,KAAKf,KAAM+B,EAAQ,IAAzF,a,GARSf,IAAMC,WCgIhBgB,G,wDAzHb,aAAe,IAAD,8BACZ,gBAsBFC,UAAY,WACVC,MAAM,GAAD,OCjCc,+BDiCd,mCC/BgB,mCD+BhB,oBAA2D,EAAKzC,MAAM4B,QAAtE,iBAAsF,EAAK5B,MAAMkC,OAAQQ,MAAK,SAAAC,GACjH,OAAOA,EAASC,UACfF,MAAK,SAAAG,GACN,EAAK1C,SAAS,CACZ2C,OAAQD,EAAKE,QACbX,YAAaS,EAAKT,kBA7BV,EAkCd1B,YAAc,SAAAF,GACZ,IAAMwC,EAAe,EAAKhD,MAAM8C,OAAOG,QAAO,SAAAC,GAAS,OAAOA,EAAKC,KAAO3C,EAAM2C,MAChF,EAAKhD,SAAS,CACZ2C,OAAQE,KArCE,EAyCdrC,oBAAsB,SAAAH,GAKpB,IAAM4C,EAAqB,sBAAO,EAAKpD,MAAMqD,iBAAlB,CAAmC7C,IAE9D,EAAKL,SAAS,CACZkD,gBAAiBD,IAEnBhD,QAAQC,IAAI+C,IAnDA,EAsDdxC,yBAA2B,SAAAJ,GACzB,IAAM4C,EAAwB,EAAKpD,MAAMqD,gBAAgBJ,QAAO,SAAAC,GAC9D,OAAOA,EAAKC,KAAO3C,EAAM2C,MAE3B,EAAKhD,SAAS,CACZkD,gBAAiBD,KA3DP,EA+DdvB,aAAe,SAAAE,GACb,EAAK5B,SAAS,CACZyB,QAASG,EACTG,KAAM,KAlEI,EAsEdC,cAAgB,SAAAJ,GACd,EAAK5B,SAAS,CACZ+B,KAAMH,KArER,EAAK/B,MAAQ,CACX8C,OAAQ,GACRO,gBAAiB,GACjBzB,QAAS,kBACTM,KAAM,EACNE,YAAa,GARH,E,gEAaZ9B,KAAKkC,c,yCAGYc,EAAWC,GACzBA,EAAU3B,UAAYtB,KAAKN,MAAM4B,SAAW2B,EAAUrB,OAAS5B,KAAKN,MAAMkC,MAC3E5B,KAAKkC,c,+BA0DC,IAAD,OAEP,OACE,yBAAK3B,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,UACb,kBAAC,EAAD,CAAWe,QAAStB,KAAKN,MAAM4B,QAASC,aAAcvB,KAAKuB,iBAG/D,yBAAKhB,UAAU,OACdP,KAAKN,MAAM8C,OAAOU,KAAI,SAAAhD,GACnB,OACE,yBAAKK,UAAU,aAAa4C,IAAKjD,EAAM2C,IACrC,kBAAC,EAAD,CAAW3C,MAAOA,EAAOE,YAAa,EAAKA,YAC3CC,oBAAqB,EAAKA,oBAC1BC,yBAA0B,EAAKA,gCAKvC,kBAAC,EAAD,CAAYsB,KAAM5B,KAAKN,MAAMkC,KAAME,YAAa9B,KAAKN,MAAMoC,YAAaD,cAAe7B,KAAK6B,iBAE9F,yBAAKtB,UAAU,SACb,2CAAiBP,KAAKN,MAAMqD,gBAAgBK,OAA5C,WACA,wBAAI7C,UAAU,cACXP,KAAKN,MAAMqD,gBAAgBG,KAAI,SAAAhD,GAAK,OACnC,wBAAIiD,IAAKjD,EAAM2C,GAAItC,UAAU,mBAC3B,yBAAKA,UAAU,kCACb,2BAAIL,EAAMC,OACV,2BAAID,EAAMU,2B,GA5GZI,IAAMC,Y,MEHxBoC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.0dd2741b.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nclass MovieItem extends React.Component{\r\n    state = {\r\n        willWatch: false\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        console.log(\"unmount\", this.props.movie.title);\r\n    }\r\n    \r\n\r\n    toggleWillWatch = () => {\r\n        this.setState({willWatch: !this.state.willWatch});\r\n    }\r\n\r\n    render() {\r\n        const { movie, removeMovie, addMovieToWillWatch, removeMovieFromWillWatch } = this.props;\r\n        //console.log(this.props);\r\n        return(\r\n            // <div>\r\n            //     <p>{movie.title}</p>\r\n            //     <button onClick={removeMovie.bind(this, movie)}>\r\n            //     Delete Movie\r\n            //     </button>\r\n            // </div>\r\n            <div className=\"card\">\r\n                <img\r\n                    className=\"card-img-top\"\r\n                    src={`https://image.tmdb.org/t/p/w500${movie.backdrop_path ||\r\n                    movie.poster_path}`}\r\n                    alt={movie.title}\r\n                />\r\n                <div className=\"card-body\">\r\n                    <h6 className=\"card-title\">{movie.title}</h6>\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                    <p className=\"mb-0\">Rating: {movie.vote_average}</p>\r\n                    <button type=\"button\" className={this.state.willWatch ? \"btn btn-success\" : \"btn btn-secondary\"} onClick={()=>{\r\n                            this.toggleWillWatch();\r\n                            this.state.willWatch ? removeMovieFromWillWatch(movie) : addMovieToWillWatch(movie);\r\n                        }}>\r\n                        {this.state.willWatch ? \"Remove Movie\" : \"Will Watch\"}\r\n                    </button>\r\n                    </div>\r\n                    <button onClick={removeMovie.bind(this, movie)}>Delete Movie</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default MovieItem;\r\n\r\n","import React from \"react\";\r\n\r\nclass MovieTabs extends React.Component{\r\n    componentWillReceiveProps(nextProps, textState) { //deprecated. will be removed in react 17\r\n        console.log(\"componentWillReceiveProps\");\r\n        console.log(\"thisProps\", this.props);\r\n        console.log(\"nextProps\", nextProps);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) { //не рендерит повторно если пропсы те же\r\n        if(nextProps.sort_by !== this.props.sort_by) {\r\n            return true;\r\n        } else return false;\r\n    }\r\n    \r\n    render() {\r\n        const { sort_by, updateSortBy } = this.props;\r\n        const handleClick = value => () => {\r\n            updateSortBy(value);\r\n        };\r\n\r\n        // const handleClick = value => { // value - event\r\n        //     return () => {\r\n        //         updateSortBy(value); \r\n        //     }\r\n        // }\r\n\r\n        const getClassLink = value => {\r\n            return `nav-link ${sort_by === value ? \"active\" : \"\" }`;\r\n        }\r\n\r\n        return(\r\n            <ul className=\"tabs nav nav-pills\">\r\n                <li className=\"nav-item\">\r\n                    <div className={getClassLink(\"popularity.desc\")} onClick={handleClick(\"popularity.desc\")}>\r\n                    Popularity desc\r\n                    </div>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                    <div className={getClassLink(\"revenue.desc\")} onClick={handleClick(\"revenue.desc\")}>\r\n                    Revenue desc\r\n                    </div>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                    <div className={getClassLink(\"vote_average.desc\")} onClick={handleClick(\"vote_average.desc\")}> \r\n                    Vote average desc\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MovieTabs;","import React from \"react\";\r\n\r\nclass Pagination extends React.Component{\r\n    render(){\r\n        const { page, updatePageNum, total_pages } = this.props;\r\n        let newPage = page;\r\n        return(\r\n            <div className=\"pagination\">\r\n                <button disabled={page === 1 ? true : false} onClick={updatePageNum.bind(this, newPage-1)}>Previous</button>\r\n                <p> Current Page: {page} from {total_pages}</p> \r\n                <button disabled={page === 500 ? true : false} onClick={updatePageNum.bind(this, newPage+1)}>Next</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Pagination;","import React from \"react\";\n//import moviesData from \"../moviesData\";\nimport MovieItem from \"./MovieItem\";\nimport MovieTabs from \"./MovieTabs\";\nimport Pagination from \"./Pagination\";\nimport { API_URL, API_KEY_3, API_KEY_4 } from \"../utils/api\"\nimport \"../stylesheets/index.scss\";\n\nclass App extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      movies: [],\n      moviesWillWatch: [],\n      sort_by: \"popularity.desc\",\n      page: 1,\n      total_pages: 0\n    }\n  };\n\n  componentDidMount() {\n    this.getMovies();\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if(prevState.sort_by !== this.state.sort_by || prevState.page !== this.state.page){\n      this.getMovies();\n    }\n  };\n  \n\n  getMovies = () => {\n    fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`).then(response => {\n      return response.json();\n    }).then(data => {\n      this.setState({\n        movies: data.results,\n        total_pages: data.total_pages\n      });\n    })\n  };\n\n  removeMovie = movie => {\n    const updateMovies = this.state.movies.filter(item => {return item.id !== movie.id; });\n    this.setState({\n      movies: updateMovies\n    });\n  };\n  \n  addMovieToWillWatch = movie => {\n    //this.state.moviesWillWatch.push(movie);\n    // const updateMoviesWillWatch = [...this.state.moviesWillWatch];\n    // updateMoviesWillWatch.push(movie);\n\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch, movie];\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n    console.log(updateMoviesWillWatch);\n  };\n\n  removeMovieFromWillWatch = movie => {\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(item => {\n      return item.id !== movie.id;\n    });\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  updateSortBy = value => {\n    this.setState({\n      sort_by: value,\n      page: 1\n    });\n  };\n\n  updatePageNum = value => {\n    this.setState({\n      page: value\n    });    \n  };\n\n  render() {\n    //console.log(this);\n    return (\n      <div className=\"container\"> \n        <div className=\"row\">\n          <div className=\"col-9\">\n            <div className=\"row mb-4 mt-4\">\n              <div className=\"col-12\">\n                <MovieTabs sort_by={this.state.sort_by} updateSortBy={this.updateSortBy} />\n              </div>\n            </div>\n            <div className=\"row\">\n            {this.state.movies.map(movie => {\n                return (\n                  <div className=\"col-4 mb-4\" key={movie.id} >\n                    <MovieItem movie={movie} removeMovie={this.removeMovie} \n                    addMovieToWillWatch={this.addMovieToWillWatch}\n                    removeMovieFromWillWatch={this.removeMovieFromWillWatch}/>\n                  </div>\n                )\n              })}\n            </div>\n            <Pagination page={this.state.page} total_pages={this.state.total_pages} updatePageNum={this.updatePageNum}/>\n          </div>\n          <div className=\"col-3\">\n            <h4>Will Watch: {this.state.moviesWillWatch.length} movies</h4>\n            <ul className=\"list-group\">\n              {this.state.moviesWillWatch.map(movie => (\n                <li key={movie.id} className=\"list-group-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    <p>{movie.title}</p>\n                    <p>{movie.vote_average}</p>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n\n  }\n\n}\n\nexport default App;\n\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}